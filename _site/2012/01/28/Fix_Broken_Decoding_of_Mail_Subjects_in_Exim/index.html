<!DOCTYPE html>
<head>

	<meta charset="utf-8">
	<title>martinklepsch.org</title>
	<meta name="description" content="">
	<meta name="author" content="">

	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<!-- CSS -->
	<link rel="stylesheet" href="/stylesheets/base.css">
	<link rel="stylesheet" href="/stylesheets/skeleton.css">
	<link rel="stylesheet" href="/stylesheets/layout.css">
	<link rel="stylesheet" href="/stylesheets/martinklepschorg.css">

	<!-- Arvo -->
	<link href='http://fonts.googleapis.com/css?family=Arvo:400,700,400italic,700italic' rel='stylesheet' type='text/css'>

	<!-- Favicons -->
	<link rel="shortcut icon" href="images/favicon.ico">
	<link rel="apple-touch-icon" href="images/apple-touch-icon.png">
	<link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
	<script src="http://github.com/DmitryBaranovskiy/raphael/raw/master/raphael-min.js"></script>
	<script src="/js/martinklepschorg.js"></script>

</head>
<body>
	<div class="container">
		<nav class="four columns">
			<div id="pseudologo">
			</div>
			<ul>
				<li><a href="/work.html">Work</a></li>
				<li><a href="/about.html">About</a></li>
				<li><a href="/archive.html">Archive</a></li>
				<li><a>Subscribe</a></li>
				<li><a href="mailto:martinklepsch+martinklepsch.org@googlemail.com"
					alt="Send me an email">Email</a></li>
			</ul>
		</nav>
		<div class="nine columns">
			<h1>Exim4 Fix Wrongly Decoded Mail Subject</h1><span class="date">28 Jan 2012</span>
<article>
	<p>If you are using <a href="http://www.exim.org/">Exim</a> to transfer mails generated by internal software you probably often get
mails with a really weird looking subject that starts with something like this:</p>

<pre><code>=?utf-8?Q?=5BPersonalverwaltung_=2D_Fehler_=23=31=37=38=5D_...
</code></pre>

<p>This problem arises when some system sends an email with <strong>more
than 76 characters in the subject line</strong> (usually people don’t do that).</p>

<blockquote>
  <p>While there is no limit to the length of a multiple-line header field,
each line of a header field that contains one or more
encoded-word’s is limited to 76 characters.</p>

  <p>The length restrictions are included both to ease interoperability
through internetwork mail gateways, and to impose a limit on the
amount of lookahead a header parser must employ (while looking for a
final ?= delimiter) before it can decide whether a token is an
“encoded-word” or something else.</p>

  <p><cite>Excerpt from <a href="http://www.ietf.org/rfc/rfc2047.txt">RFC2047</a></cite></p>
</blockquote>

<h2 id="fix-it">Fix It</h2>

<p>You can remove the length checking by adding the following to the main section of your
<code>/etc/exim4/exim4.conf</code>. The main section usually ends with the first <code>begin</code> in that file.</p>

<pre><code>check_rfc2047_length = false
</code></pre>

<p>For further reference I recommend the official <a href="http://www.exim.org/exim-html-current/doc/html/spec_html/ch14.html">Exim documentation</a></p>

</article>

			<hr>
			<footer id="copyright">
				<p>© 2012 Martin Klepsch. All rights reserved.</p>
			</footer>
		</div>
	</div>
</body>
</html>
